<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ricette & Lista Spesa</title>

  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --text:#111; --muted:#667; --primary:#0a68ff; --ok:#12a150;
      --chip:#eef1f7; --chipText:#445; --shadow:0 6px 18px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    header{position:sticky;top:0;background:#fff;box-shadow:var(--shadow);z-index:10}
    header .bar{max-width:1080px;margin:0 auto;display:flex;gap:12px;align-items:center;padding:10px 14px}
    h1{font-size:18px;margin:0 10px 0 0}
    .ver{font-size:12px;color:var(--muted);background:var(--chip);padding:2px 8px;border-radius:999px}
    .input{flex:1;min-width:200px}
    input[type="search"]{width:100%;padding:10px 12px;border:1px solid #dde1ee;border-radius:10px;background:#fff}
    button{cursor:pointer;border:1px solid transparent;border-radius:10px;padding:10px 14px;font-weight:600}
    .btn{background:#fff;border-color:#dde1ee}
      .btn:hover{border-color:#cbd3ea}
    .btn-primary{background:var(--primary);color:#fff;border-color:var(--primary)}
      .btn-primary:hover{filter:brightness(.95)}
    main{max-width:1080px;margin:22px auto;padding:0 14px;display:grid;grid-template-columns:repeat(2,1fr);gap:18px}
    @media (max-width:800px){main{grid-template-columns:1fr}}
    article.recipe-card{background:var(--card);border-radius:14px;box-shadow:var(--shadow);display:flex;gap:14px;padding:12px}
    .thumb{width:88px;height:88px;border-radius:12px;object-fit:cover;background:#fff;border:1px solid #eef1f6}
    .body{flex:1;min-width:0}
    h3{margin:0 0 6px 0;font-size:18px}
    .meta{color:var(--muted);font-size:13px;margin:0 0 10px 0}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .chip{background:var(--chip);color:var(--chipText);font-size:12px;border-radius:999px;padding:4px 10px}
    .btn-ok{background:var(--ok);color:#fff}
    .btn-video[disabled]{background:#e8ecf6;color:#9aa4bd;border-color:#e8ecf6;cursor:not-allowed}

    /* ─────────────── Modale video ─────────────── */
    .video-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:9999}
    .video-modal.show{display:flex}
    .video-modal .vm-card{position:relative;width:min(960px,90vw);aspect-ratio:16/9;background:#000;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.4)}
    .video-modal iframe{width:100%;height:100%;border:0;border-radius:10px}
    .video-modal .vm-close{
      position:absolute;top:-16px;right:-16px;width:36px;height:36px;border:0;border-radius:50%;
      background:#111;color:#fff;cursor:pointer;font-size:20px;line-height:36px;text-align:center;
      box-shadow:0 4px 12px rgba(0,0,0,.4)
    }
    .video-modal .vm-close:hover{background:#000}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <h1>Ricette & Lista Spesa</h1>
      <span class="ver" id="app-version">vdev</span>
      <div class="input"><input id="search" type="search" placeholder="Cerca ricette o ingredienti…" /></div>
      <button id="refresh" class="btn">Aggiorna dati</button>
    </div>
  </header>

  <main id="recipes" aria-live="polite">
    <!-- le card vengono iniettate da app.v16.js -->
  </main>

  <!-- ───────────────────────── Video Modal ───────────────────────── -->
  <div id="video-modal" class="video-modal" aria-modal="true" role="dialog" aria-label="Video YouTube">
    <div class="vm-card">
      <button id="video-close" class="vm-close" aria-label="Chiudi">×</button>
      <iframe id="yt-frame"
              title="YouTube video"
              allow="autoplay; encrypted-media; picture-in-picture"
              allowfullscreen
              loading="eager"
              referrerpolicy="no-referrer">
      </iframe>
    </div>
  </div>
  <!-- ─────────────────────────────────────────────────────────────── -->

  <script>
    // Espongo una versione per il cache-busting dello script/dataset
    window.APP_VERSION = 'vdev';
  </script>
  <script defer src="script/app.v16.js?v=vdev"></script>
</body>
</html>
