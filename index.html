<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ricette & Lista Spesa</title>
  <meta name="description" content="Zero sprechi, più idee in cucina.">
  <link rel="icon" href="assets/icons/icon-192.png">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <meta name="robots" content="index,follow">
</head>
<body>
  <header class="topbar">
    <div class="row">
      <h1>Ricette & Lista Spesa <small id="app-version"></small></h1>
      <div class="actions">
        <label class="chk">
          <input type="checkbox" id="only-fav">
          <span>Solo preferiti</span>
        </label>
        <button id="refresh" class="btn">Aggiorna dati</button>
      </div>
    </div>

    <div class="row">
      <input id="search" class="search" type="search" placeholder="Cerca ricette o ingredienti">
    </div>

    <nav id="chipbar" class="chips">
      <button class="chip active" data-tag="tutti">Tutti</button>
      <button class="chip" data-tag="4-ingredienti">4-ingredienti</button>
      <button class="chip" data-tag="antipasto">antipasto</button>
      <button class="chip" data-tag="comfort">comfort</button>
      <button class="chip" data-tag="dispensa">dispensa</button>
      <button class="chip" data-tag="estate">estate</button>
      <button class="chip" data-tag="leggero">leggero</button>
      <button class="chip" data-tag="onnivoro">onnivoro</button>
      <button class="chip" data-tag="primo">primo</button>
      <button class="chip" data-tag="secondo">secondo</button>
      <button class="chip" data-tag="vegetariano">vegetariano</button>
      <button class="chip" data-tag="veloce">veloce</button>
    </nav>
  </header>

  <main class="container">
    <section class="box">
      <label for="ingredients" class="lbl">Generatore antispreco</label>
      <div class="row">
        <textarea id="ingredients" rows="3" placeholder="Scrivi ingredienti separati da virgola o a capo"></textarea>
        <button id="btn-suggest" class="btn">Suggerisci ricette</button>
      </div>
    </section>

    <section class="box">
      <h2>Fotocamera OCR</h2>
      <div class="cam-grid">
        <video id="cam-video" playsinline muted class="cam-view" aria-label="Anteprima fotocamera"></video>
        <canvas id="cam-canvas" class="cam-view" width="640" height="360" aria-label="Frame catturato"></canvas>
      </div>
      <div class="row gap">
        <button id="cam-open" class="btn">Apri fotocamera</button>
        <button id="cam-shot" class="btn" disabled>Scatta</button>
        <button id="cam-close" class="btn" disabled>Chiudi</button>
        <select id="cam-dev" aria-label="Dispositivo"></select>
        <label class="btn">
          <input id="cam-file" type="file" accept="image/*" hidden>
          Carica foto
        </label>
      </div>
      <p class="muted">Il testo riconosciuto sarà aggiunto al box ingredienti. OCR leggero, placeholder.</p>
    </section>

    <section class="grid" id="recipes" aria-live="polite">
      <!-- cards render here -->
    </section>
  </main>

  <!-- Video Modal -->
  <div id="video-modal" class="vm" aria-hidden="true" role="dialog" aria-label="Video ricetta">
    <div class="vm-backdrop"></div>
    <div class="vm-body" role="document">
      <button id="video-close" class="vm-close" aria-label="Chiudi video">×</button>
      <div class="vm-frame">
        <iframe
          id="yt-frame"
          title="YouTube player"
          src="about:blank"
          allow="autoplay; encrypted-media; picture-in-picture"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
          loading="lazy">
        </iframe>
      </div>
    </div>
  </div>

  <footer class="footer">
    <small>Zero sprechi, più idee in cucina.</small>
  </footer>

  <script> window.APP_VERSION = '16.9' </script> <script src="./script/app_v16.js?v=16.9" defer></script

  <!-- Service Worker opzionale -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>


