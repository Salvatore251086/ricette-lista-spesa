<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ricette & Lista Spesa v16.6</title>
  <meta name="color-scheme" content="light dark">
  <link rel="icon" href="assets/icons/icon-192.png">
  <style>
    :root {
      --bg:#f7f8fb; --card:#ffffff; --text:#1f2633; --muted:#6b7380;
      --brand:#3b82f6; --accent:#22c55e; --chip:#e6f0ff; --chip-on:#2563eb;
      --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; background:var(--bg); color:var(--text); font:14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    header{position:sticky; top:0; z-index:50; background:linear-gradient(to bottom, rgba(247,248,251,.9), rgba(247,248,251,.6) 55%, transparent); backdrop-filter: blur(8px); border-bottom:1px solid var(--border)}
    .container{max-width:1100px; margin:0 auto; padding:10px 16px}
    h1{margin:0 0 8px 0; font-size:20px; font-weight:700}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    input[type="search"]{width:100%; max-width:480px; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:#fff}
    .btn{appearance:none; border:1px solid var(--border); background:#fff; padding:8px 12px; border-radius:10px; cursor:pointer}
    .btn:hover{border-color:#0d51d3}
    .btn-ghost{border-color:#0bb15a33; color:#0b9a53; background:#e9fbf2}
    .btn-ghost:disabled{opacity:.5}
    .btn-video{border-color:#3b82f633; color:#1f56e3; background:#eaf1ff}
    .btn-video:disabled{opacity:.5}
    .chips{display:flex; flex-wrap:wrap; gap:8px; margin:10px 0 6px}
    .chip{padding:6px 10px; border-radius:24px; border:1px solid #dbe6ff; background:var(--chip); color:#24459b; cursor:pointer; user-select:none}
    .chip.active{background:#e8efff; border-color:#b9ccff; color:var(--chip-on); font-weight:600}
    .grid{display:grid; grid-template-columns:repeat(4,1fr); gap:14px; padding:16px}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:720px){.grid{grid-template-columns:repeat(2,1fr)}}
    .recipe-card{background:var(--card); border:1px solid var(--border); border-radius:14px; overflow:hidden; display:flex; flex-direction:column}
    .recipe-card .thumb{width:100%; aspect-ratio:16/10; object-fit:cover; background:#fff}
    .recipe-card .body{padding:12px}
    .recipe-card h3{margin:0 0 6px; font-size:15px}
    .meta{margin:0 0 8px; color:var(--muted)}
    .tags{display:flex; flex-wrap:wrap; gap:6px; min-height:20px}
    .tag{font-size:12px; padding:3px 8px; border-radius:14px; background:#f1f5ff; color:#345}
    .actions{display:flex; gap:8px; margin-top:10px}
    .muted{color:var(--muted)}
    footer{padding:12px; text-align:center; color:var(--muted)}
    /* Modale video */
    .vm-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center}
    .vm-backdrop.show{display:flex}
    .vm{width:min(900px, 92vw); aspect-ratio:16/9; background:#000; border-radius:12px; overflow:hidden; position:relative}
    .vm iframe{width:100%; height:100%; border:0}
    #video-close{position:absolute; top:8px; right:8px; background:#fff; border:0; border-radius:10px; padding:6px 10px; cursor:pointer}
    .right{margin-left:auto}
    .lbl{display:flex; align-items:center; gap:6px; color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Ricette & Lista Spesa <small id="app-version" class="muted" style="font-weight:600"></small></h1>
      <div class="toolbar">
        <button id="refresh" class="btn">Aggiorna dati</button>
        <input id="search" type="search" placeholder="Cerca ricette o ingredienti">
        <label class="lbl right"><input id="only-fav" type="checkbox"> Solo preferiti</label>
      </div>

      <!-- Barra chip -->
      <div id="chipbar" class="chips">
        <span class="chip active" data-tag="tutti">Tutti</span>
        <span class="chip" data-tag="4-ingredienti">4-ingredienti</span>
        <span class="chip" data-tag="antipasto">antipasto</span>
        <span class="chip" data-tag="comfort">comfort</span>
        <span class="chip" data-tag="dispensa">dispensa</span>
        <span class="chip" data-tag="estate">estate</span>
        <span class="chip" data-tag="leggero">leggero</span>
        <span class="chip" data-tag="onnivoro">onnivoro</span>
        <span class="chip" data-tag="primo">primo</span>
        <span class="chip" data-tag="secondo">secondo</span>
        <span class="chip" data-tag="vegetariano">vegetariano</span>
        <span class="chip" data-tag="veloce">veloce</span>
      </div>
    </div>
  </header>

  <main class="container" style="padding:0">
    <div id="recipes" class="grid">
      <!-- cards iniettate da JS -->
    </div>
  </main>

  <footer class="container">Zero sprechi, pi√π idee in cucina.</footer>

  <!-- Modale video -->
  <div id="video-modal" class="vm-backdrop" aria-hidden="true">
    <div class="vm">
      <button id="video-close" aria-label="Chiudi">Chiudi</button>
      <iframe
        id="yt-frame"
        src="about:blank"
        allow="accelerometer; encrypted-media; autoplay; picture-in-picture"
        allowfullscreen
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </div>

  <script>
    window.APP_VERSION = "v16.6";
  </script>
  <script src="script/app/app_v16.6.js" defer></script>
</body>
</html>
