<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ricette & Lista Spesa | App</title>
  <meta name="description" content="Ricette antispreco e lista spesa smart. PWA leggera e veloce.">
  <meta name="theme-color" content="#10b981">

  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
  <link rel="icon" href="favicon.ico">

  <meta property="og:title" content="Ricette & Lista Spesa">
  <meta property="og:description" content="Ricette antispreco e lista spesa smart.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/icons/icon-512.png?v=2">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ricette & Lista Spesa">
  <meta name="twitter:description" content="Ricette antispreco e lista spesa smart.">
  <meta name="twitter:image" content="assets/icons/icon-512.png?v=2">

  <style>
    /* Critical CSS minimo per evitare FOUC e CLS */
    :root { color-scheme: light dark; }
    html,body { height:100%; }
    body {
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif;
      line-height:1.5;
      text-rendering:optimizeLegibility;
      -webkit-font-smoothing:antialiased;
      background:#fff;
      color:#0a0a0a;
    }
    .container { max-width:960px; margin:0 auto; padding:16px; }
    .top-nav { display:flex; gap:16px; font-size:14px; }
    .top-nav a { color:#0a0a0a; text-decoration:none; }
    .hero { display:flex; flex-direction:column; align-items:flex-start; gap:16px; padding-top:8px; }
    .hero-img { width:512px; height:512px; max-width:100%; height:auto; display:block; }
    h1 { font-size:clamp(24px, 4vw, 32px); margin:8px 0; }
    .cta { display:flex; gap:12px; }
    #installBtn { padding:10px 14px; border:0; border-radius:8px; background:#10b981; color:#fff; cursor:pointer; }
    #installBtn[disabled] { opacity:.6; cursor:default; }
    .btn-link { padding:10px 14px; border-radius:8px; border:1px solid #e5e7eb; text-decoration:none; color:#0a0a0a; }
    .muted { color:#475569; font-size:14px; }
    .plans { margin:0; }
    .shot { width:192px; height:192px; display:block; }
    footer { color:#475569; font-size:14px; padding-bottom:24px; }
  </style>

  <link rel="preload" href="styles.css?v=2" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="styles.css?v=2"></noscript>
  <link rel="preload" href="app.js?v=2" as="script">
</head>
<body>
  <header class="container">
    <nav class="top-nav" aria-label="Collegamenti rapidi">
      <a href="privacy.html">Privacy</a>
      <a href="terms.html">Termini</a>
      <a href="offline.html">Offline</a>
    </nav>

    <div class="hero">
      <picture>
        <source type="image/webp" srcset="assets/icons/icon-512.webp">
        <img src="assets/icons/icon-512.png" alt="Logo Ricette & Lista Spesa" class="hero-img" width="512" height="512" fetchpriority="high">
      </picture>

      <h1>Ricette antispreco + Lista Spesa smart</h1>
      <p>Trasforma ciò che hai in frigo in piatti veloci. Installa la PWA e unisciti al canale WhatsApp per ricette e offerte vicino a te.</p>

      <div class="cta">
        <button id="installBtn" disabled>Installa l’app</button>
        <a class="btn-link" href="https://wa.me/message" target="_blank" rel="noopener">Apri il canale WhatsApp</a>
      </div>

      <p class="muted">Se il tasto non appare, apri con Chrome o Edge su Android o Safari su iPhone e usa Aggiungi alla schermata Home.</p>

      <p class="plans">
        Piani, Starter 2,99€/mese. Pro 19,99€/mese
        <a href="links.html">Dettagli e attivazione</a>
      </p>
    </div>
  </header>

  <main class="container">
    <h2>Novità e notifiche</h2>
    <p>Per iniziare usiamo il canale WhatsApp per gli avvisi. Le push browser arriveranno dopo.</p>

    <picture>
      <source type="image/webp" srcset="assets/icons/icon-192.webp">
      <img src="assets/icons/icon-192.png" alt="Logo app" class="shot" width="192" height="192" loading="lazy">
    </picture>
  </main>

  <footer class="container footer">
    <p>© <span id="year"></span> Ricette & Lista Spesa</p>
  </footer>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistration().then(reg => {
        if (!reg) navigator.serviceWorker.register('service-worker.js', { scope: './' })
      })
    }
  </script>
  <script defer src="app.js?v=2"></script>
</body>
</html>
