<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ricette & Lista Spesa</title>
  <link rel="icon" href="assets/icons/icon-512.png">
  <style>
    /* Stili già presenti + aggiunte in fondo */

    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,sans-serif;background:#f7f7f8;color:#212121}
    header{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid #e6e6e6}
    header .bar{display:flex;gap:.75rem;align-items:center;max-width:1100px;margin:0 auto;padding:.75rem 1rem;flex-wrap:wrap}
    h1{font-size:1.1rem;margin:0 0 .25rem 0}
    #app-version{background:#eef4ff;color:#234; border:1px solid #d8e4ff;border-radius:6px;padding:.2rem .45rem;font-size:.8rem}
    #search{flex:1 1 320px;max-width:520px;padding:.55rem .7rem;border:1px solid #d5d8dc;border-radius:8px}
    #only-favs{margin-left:.25rem;transform:translateY(1px)}
    #refresh{padding:.55rem .7rem;border:1px solid #1f7a4a;background:#22a15a;color:#fff;border-radius:8px;cursor:pointer}
    #refresh:disabled{opacity:.6;cursor:default}
    #tagbar{max-width:1100px;margin:.5rem auto 0 auto;padding:0 1rem;display:flex;gap:.5rem;flex-wrap:wrap}
    .pill{padding:.35rem .6rem;border:1px solid #d5d8dc;border-radius:999px;background:#fff;cursor:pointer}
    .pill.active{background:#222;color:#fff;border-color:#222}

    main{max-width:1100px;margin:1rem auto;padding:0 1rem;display:grid;gap:1rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1rem}
    .recipe-card{display:flex;gap:12px;background:#fff;border:1px solid #e6e6e6;border-radius:12px;padding:12px}
    .recipe-card img{width:84px;height:84px;object-fit:contain;border-radius:8px;background:#fafafa;border:1px solid #eee}
    .recipe-card h3{margin:.1rem 0 .25rem 0;font-size:1.05rem}
    .recipe-card .meta{margin:.15rem 0 .35rem 0;color:#4a4a4a;font-size:.9rem}
    .actions{display:flex;gap:.5rem;align-items:center}
    .btn-fav{border:1px solid #d5d8dc;background:#fff;border-radius:8px;padding:.35rem .55rem;cursor:pointer}
    .btn-fav[aria-pressed="true"]{color:#bf7a00;border-color:#bf7a00;background:#fff7e6}
    .btn-recipe{background:#0aa35d;color:#fff;border:0;border-radius:8px;padding:.40rem .65rem;text-decoration:none}
    .btn-video{background:#1266d2;color:#fff;border:0;border-radius:8px;padding:.40rem .65rem;cursor:pointer}
    .btn-video[disabled]{background:#b7c7e6;cursor:not-allowed}

    /* Modale video */
    .video-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6)}
    .video-modal.show{display:flex}
    .vm-backdrop{position:absolute;inset:0}
    .vm-wrap{position:relative;width:min(960px,92vw);aspect-ratio:16/9;background:#000;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden}
    .vm-close{position:absolute;right:10px;top:10px;background:#fff;border:0;border-radius:6px;padding:.35rem .5rem;cursor:pointer}
    .vm-iframe{width:100%;height:100%;border:0}

    /* Aggiunte per ordinamento e contatore */
    .toolbar-right{display:flex;gap:.5rem;align-items:center;margin-left:auto}
    #sort{padding:.55rem .7rem;border:1px solid #d5d8dc;border-radius:8px;background:#fff}
    #result-count{font-size:.9rem;color:#444;padding:.25rem .4rem;border-radius:6px;background:#f1f3f5;border:1px solid #e3e5e8}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <h1>Ricette & Lista Spesa</h1>
      <span id="app-version">vdev</span>

      <input id="search" type="search" placeholder="Cerca ricette o ingredienti…">
      <label><input id="only-favs" type="checkbox"> Solo preferiti</label>

      <div class="toolbar-right">
        <label for="sort" style="font-size:.9rem;color:#333">Ordina</label>
        <select id="sort" aria-label="Ordina per">
          <option value="relevance">Rilevanza</option>
          <option value="title-az">Titolo A→Z</option>
          <option value="title-za">Titolo Z→A</option>
          <option value="time-asc">Tempo ↑</option>
          <option value="time-desc">Tempo ↓</option>
        </select>
        <span id="result-count">0 risultati</span>
        <button id="refresh">Aggiorna dati</button>
      </div>
    </div>

    <div id="tagbar" aria-label="Filtra per tag"></div>
  </header>

  <main>
    <section id="recipes" class="grid" aria-live="polite"></section>
  </main>

  <!-- Modale video -->
  <div id="video-modal" class="video-modal" role="dialog" aria-modal="true" aria-label="Video YouTube">
    <div class="vm-backdrop"></div>
    <div class="vm-wrap">
      <button id="video-close" class="vm-close" aria-label="Chiudi">×</button>
      <iframe id="yt-frame" class="vm-iframe" src="about:blank" allow="autoplay; encrypted-media" allowfullscreen loading="lazy" referrerpolicy="no-referrer"></iframe>
    </div>
  </div>

  <script defer src="./script/app.v16.js?v=vdev"></script>
</body>
</html>
