<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ricette & Lista Spesa</title>
  <meta name="theme-color" content="#ffffff">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">

  <style>
    :root{
      --bg:#f7f7f7; --card:#ffffff; --txt:#222; --muted:#666;
      --green:#16a34a; --blue:#2563eb; --border:#e5e7eb;
    }
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      color:var(--txt); background:var(--bg);
    }
    header{
      position:sticky; top:0; z-index:10; background:#fff; border-bottom:1px solid var(--border);
    }
    .wrap{max-width:1100px; margin:0 auto; padding:12px 16px}
    .row{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    h1{font-size:18px; font-weight:700; margin:8px 0}
    input[type="search"]{flex:1 1 260px; min-width:260px; padding:10px 12px; border:1px solid var(--border); border-radius:8px}
    button{cursor:pointer; border:0; border-radius:8px; padding:9px 14px; font-weight:600; background:#eee; color:#111}
    main{padding:16px}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:12px}
    .card{background:var(--card); border:1px solid var(--border); border-radius:12px; overflow:hidden}
    .card h3{font-size:15px; margin:8px 10px}
    .pill{display:inline-block; padding:4px 8px; border-radius:999px; font-size:12px; background:#eef2ff; color:#1e3a8a; margin:0 6px 10px}
    .tools{display:flex; gap:6px; padding:8px 10px}
    .dev{max-width:1100px; margin:24px auto}
    .panel{background:#fff; border:1px solid var(--border); border-radius:12px; padding:14px}
    .panel h2{margin:0 0 8px 0; font-size:18px}
    table{width:100%; border-collapse:collapse; font-size:14px}
    th,td{padding:10px 8px; border-bottom:1px solid var(--border)}
    th{font-weight:700; text-align:left; background:#fafafa}
    .tfoot{font-size:12px; color:#777; padding:6px 0}
    footer{padding:18px; color:#666; font-size:13px; text-align:center}
  </style>

  <!-- Config applicazione: usa l'indice YouTube risolto -->
  <script>
    window.APP_CONFIG = {
      videoIndexUrl: "assets/json/video_index.resolved.json",
      recipesUrl: "assets/json/recipes-it.json",
      cacheVersion: "v18",
      env: "production"
    };
  </script>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="row">
        <h1>Ricette & Lista Spesa</h1>
        <input id="q" type="search" placeholder="Cerca ricette">
        <button id="btn-refresh">Aggiorna dati</button>
        <button id="btn-open-dev">Dev</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div id="filters" class="row" aria-label="Filtri tag"></div>
    <section aria-label="Elenco ricette">
      <div id="grid" class="grid"></div>
    </section>
  </main>

  <!-- Pannello Dev: Verifica YouTube -->
  <section class="dev">
    <div class="panel">
      <h2>Verifica YouTube</h2>
      <div id="yt-summary" class="tfoot">Caricamento…</div>
      <div style="overflow:auto; max-height:520px; border:1px solid var(--border); border-radius:10px">
        <table id="yt-table">
          <thead>
            <tr>
              <th style="min-width:320px">Titolo ricetta</th>
              <th style="min-width:110px">youtubeId</th>
              <th style="min-width:280px">Titolo video</th>
              <th style="min-width:160px">Canale</th>
              <th style="min-width:110px">Confidenza</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="tfoot">Zero sprechi, più idee in cucina.</div>
    </div>
  </section>

  <footer>Zero sprechi, più idee in cucina.</footer>

  <script src="app.v16.js" defer></script>
<!-- include yt-audit -->
<script src="script/yt-audit.v2.js"></script>
</body>
</html>

